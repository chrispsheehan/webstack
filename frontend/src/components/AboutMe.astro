---
let message = "Loading...";

try {
  const { baseDomain } = Astro.props;

  const response = await fetch(`${baseDomain}/api/hello`);

  if (!response.ok) {
    throw new Error(`HTTP error! Status: ${response.status}`);
  }

  message = await response.json();
} catch (error) {
  console.error("Error fetching data:", error);
  message = `Failed to load message. error: ${error}`;
}

// Define an array of certification objects
const certifications = [
  {
    href: "https://www.credly.com/badges/b12a2630-eee0-44b0-9b15-a4006b1c36f8/public_url",
    src: "/assets/certs/aws-certified-developer-associate.png",
    alt: "AWS Certified Developer Associate",
  },
  {
    href: "https://www.credly.com/badges/6079e7e6-a810-420e-ac57-5ad8eefb1c27/public_url",
    src: "/assets/certs/ckad-certified-kubernetes-application-developer.png",
    alt: "CKAD Certified Kubernetes Application Developer",
  },
  {
    href: "https://www.credly.com/badges/1a613823-2c00-406d-8ce6-be87ac840106/public_url",
    src: "/assets/certs/hashicorp-certified-terraform-associate-003.png",
    alt: "HashiCorp Certified: Terraform Associate",
  },
  {
    href: "https://www.credly.com/badges/3e27ad47-17d2-4706-aba5-9b222aa749b6/public_url",
    src: "/assets/certs/aws-certified-cloud-practitioner.png",
    alt: "AWS Certified Cloud Practitioner",
  },
  {
    href: "https://www.credly.com/badges/10fbcc79-6211-4cca-9bbb-7e240fc1c4c8/public_url",
    src: "/assets/certs/github-actions-certification-program.png",
    alt: "GitHub Actions Certification Program",
  },
];
---

<section id="about-me">
  <h2>About Me</h2>
  <h3>Chris Sheehan - Senior Platform Engineer</h3>
  <p>Designing, configuring, and automating CI/CD workflows</p>
  <p>Managing infrastructure, deployment pipelines, and code promotion</p>
  <p>
    Implementing performance metrics and dashboards along with alerting systems
  </p>
  <div class="cert">
    {
      certifications.map((cert) => (
        <a href={cert.href} target="_blank" rel="noopener noreferrer">
          <img src={cert.src} alt={cert.alt} class="b" />
        </a>
      ))
    }
  </div>
  <div class="api-message">
    <h3>API Response:</h3>
    <p>{message}</p>
  </div>
</section>

<style>
  @media (min-width: 100px) {
    .cert {
      margin-top: 2rem;
      text-align: center;
    }
    .b:hover {
      background-color: var(--color-background-soft);
    }
    .api-message {
      margin-top: 2rem;
      padding: 1rem;
      background-color: var(--color-background-soft);
      border-left: 5px solid var(--color-accent);
    }
  }
</style>
